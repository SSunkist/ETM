<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV TIRE MALL</title>
    <link rel="stylesheet" href="../css/detail.css">
    <link rel="icon" href="./img/favicon.jpg" type="image/x-icon">
</head>
<body>
    <div id="allWrap">
        <header> <!-- header -->
            <section id="logoSearch"> <!-- logoSearch -->
                <div id="search">
                    <div id="detailSearch">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                        <p>상세검색</p>
                    </div>
                </div>
                <div id="logo">
                    <img src="./images/logo.png">
                </div>
            </section>
            <section id="user"> <!-- user -->
                
                <th:block th:if="${session.user} == null">
                    <div id="login">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-power" viewBox="0 0 16 16">
                            <path d="M7.5 1v7h1V1h-1z"/>
                            <path d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z"/>
                        </svg>
                        <p>로그인</p>
                    </div>
                </th:block>

                <th:block th:if="${session.user} != null">
                    <div id="logout">
                        <p>[[${session.user.name}]]님, 환영합니다!</p>
                    </div>
                </th:block>

                <div id="cart">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart" viewBox="0 0 16 16">
                        <path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </svg>
                    <p>장바구니</p>
                </div>
                <div id="mypage">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"/>
                    </svg>
                    <p>마이페이지</p>
                </div>
            </section>
        </header>
        
        <main>
            <div class="main-wrapper"> 
                <div class="main-header">
                    <h2>상세 검색</h2>
                    <div>제품찾기</div>
                    <div>장바구니</div>
                    <div>마이페이지</div>
                </div>
                <div class="main">
                    <div class="main-content">
                        <img th:src="${product.product_image}">
                        <div class="main-content-product">
                            <div class="product_name">[[${product.product_name}]]</div>
                            <div class="product_spec">[[${product.product_spec}]]</div>
                            <div class="product_price">[[${product.product_price}]]</div>
                        </div>
                        <div class="main-content-buy">
                            <div class="main-content-buy-qty">
                                수량&nbsp;
                                <div class="select-qty">
                                    <button type="button" class="qtyminus">-</button>
                                    <div class="qty">0</div>
                                    <button type="button" class="qtyplus">+</button>
                                </div>
                            </div>
                            <div class="totalprice">총 상품금액&nbsp; <span class="price">0</span>원</div>
                            <button type="button" class="cart">장바구니</button>
                            <button type="button" class="purchase">구매하기</button>
                        </div>
                    </div>
                    <div class="main-spec">
                        <div id="goodsdetail">상품 상세정보</div>
                        <div class="main-spec-list">
                            <table id="details">
                                <tr>
                                    <td id="design">제조회사</td>
                                    <td>[[${company}]]</td>
                                    <td id="design">적용차종</td>
                                    <td>[[${product.car_type}]]</td>
                                </tr>
                            </table>
                            <table id="details">
                                <tr>
                                    <th:block th:if="${product.season} != null or ${product.alpine} != null">
                                        <th colspan="4" style="width:1200px">타이어 종류</th>
                                    </th:block>
                                </tr>
                                <tr class="recommend">
                                    <th:block th:if="${product.season} != null">
                                        <td id="design">[[${product.season}]]</td>
                                        <td>O</td>
                                    </th:block>
                                    <th:block th:if="${product.alpine} != null">
                                        <td id="design">[[${product.alpine}]]</td>
                                        <td>O</td>
                                    </th:block>
                                </tr>
                            <table id="details">
                                <tr>
                                    <th colspan="4">타이어 특성</th>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.tire_type} != null">
                                        <td id="design">[[${product.tire_type}]]</td>
                                        <td>O</td>
                                    </th:block>
                                    <th:block th:if="${product.low_noise} != null">
                                        <td id="design">[[${product.low_noise}]]</td>
                                        <td>O</td>
                                    </th:block>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.width} != null">
                                        <td id="design">단면폭</td>
                                        <td>[[${product.width}]]</td>
                                    </th:block>
                                    <th:block th:if="${product.aspect_ratio} != null">
                                        <td id="design">편평비</td>
                                        <td>[[${product.aspect_ratio}]]</td>
                                    </th:block>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.wheel_diameter} != null">
                                        <td id="design">휠지름</td>
                                        <td>[[${product.wheel_diameter}]]</td>
                                    </th:block>
                                    <th:block th:if="${product.energy_efficiency_rating} != null">
                                        <td id="design">에너지효율등급</td>
                                        <td>[[${product.energy_efficiency_rating}]]</td>
                                    </th:block>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.wet_road_braking_power} != null">
                                        <td id="design">젖은노면제동력</td>
                                        <td>[[${product.wet_road_braking_power}]]</td>
                                    </th:block>
                                    <th:block th:if="${product.utqg_treadwear} != null">
                                        <td id="design">UTQG 마모지수</td>
                                        <td>[[${product.utqg_treadwear}]]</td>
                                    </th:block>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.utqg_braking_power} != null">
                                        <td id="design">UTQG 제동력</td>
                                        <td>[[${product.utqg_braking_power}]]</td>
                                    </th:block>
                                    <th:block th:if="${product.utqg_heat_resistance} != null">
                                        <td id="design">UTQG 마모지수</td>
                                        <td>[[${product.utqg_heat_resistance}]]</td>
                                    </th:block>
                                </tr>
                            </table>
                            <table id="details1">
                                    <th:block th:if="${product.recommend} != null">
                                        <tr>    
                                            <th id="design1" th:if="${product.recommend} != null">추천 차종</th>
                                        </tr>
                                        <td class="recommend">[[${product.recommend}]]</td>
                                    </th:block>
                            </table>
                        </div>
                    </div>
                    <div id="review">
                    <div id="goodsreview">상품 리뷰</div><br>
                        <th:block th:if="${cnt} < 1">
                            <div class="main-review">
                                <div class="main-review-list">현재 작성된 리뷰가 없습니다.</div>
                            </div>
                        </th:block>

                        <th:block th:if="${cnt} > 0">
                            <div class="main-review" th:each="review : ${review}">
                                <div class="main-review-id">[[${review.id}]]&nbsp;|&nbsp;[[${review.date}]]</div>
                                <div class="main-review-list">[[${review.content}]]</div><br>
                            </div>
                        </th:block>
                    </div> 
                </div>

            </div>
        </main>

        <footer> <!-- footer -->
            <div id="introduce">
                <div id="introduceWrap">
                    <p>주소 : 광주광역시 광산구 소촌로 152번길 37</p>
                    <p>대표이사 : 조가영</p>
                    <p>사업자등록번호 : 108-35-62845</p>
                </div>
            </div>
            <div id="help">
                <div id="helpWrap">
                    <p>고객센터 8356 - 2845</p>
                    <p>평일 09:00 ~ 18:00</p>
                    <p>토요일, 공휴일 휴무</p>
                </div>
            </div>
        </footer>
    </div>
    <div id="checkBox"> <!-- 상세검색 모달 -->
        <div id="checkBoxX">
            <p>&#215;</p>
        </div>
        <div id="choiceTitle">
            <div id="choiceWrap">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                </svg>
                <p>상세검색</p>
            </div>
        </div>
        <form action="/searchlist" method="get">
            <div id="choice">
                <div id="manufacture"> 
                    <div id="manufactureTitle">
                        <p>제조사별</p>
                    </div>
                    <ul id="manufactureCheck">
                        <li>
                            <input type="checkbox" name="hankook" value="한국타이어">
                            한국타이어
                        </li>
                        <li>
                            <input type="checkbox" name="kumho" value="금호타이어">    
                            금호타이어
                        </li>
                        <li>
                            <input type="checkbox" name="nexen" value="넥센타이어">
                            넥센타이어
                        </li>
                        <li>
                            <input type="checkbox" name="michelin" value="미쉐린타이어">
                            미쉐린타이어
                        </li>
                        <li>
                            <input type="checkbox" name="continental" value="콘티넨탈타이어">
                            콘티넨탈타이어
                        </li>
                    </ul>
                </div>
                <div id="car"> 
                    <div id="carTitle">
                        <p>적용차종</p>
                    </div>
                    <ul id="carCheck">
                        <li>
                            <input type="checkbox" name="pcar" value="승용차용">
                            승용차용
                        </li>
                        <li>
                            <input type="checkbox" name="suvcar" value="SUV, RV용">    
                            SUV,RV용
                        </li>
                    </ul>
                </div>
                <div id="character"> 
                    <div id="characterTitle">
                        <p>타이어특성</p>
                    </div>
                    <ul id="characterCheck">
                        <li>
                            <input type="checkbox" name="comfort" value="컴포트형">
                            컴포트형
                        </li>
                        <li>
                            <input type="checkbox" name="sports" value="스포츠형">    
                            스포츠형
                        </li>
                        <li>
                            <input type="checkbox" name="lownoise" value="저소음">
                            저소음
                        </li>
                    </ul>
                </div>
                <div id="mm"> 
                    <div id="mmTitle">
                        <p>단면폭(mm)</p>
                    </div>
                    <ul id="mmCheck">
                        <div id="mmCheck1">
                            <li>
                                <input type="checkbox" name="125" value="125mm">
                                125mm
                            </li>
                            <li>
                                <input type="checkbox" name="205" value="205mm">    
                                205mm
                            </li>
                            <li>
                                <input type="checkbox" name="215" value="215mm">
                                215mm
                            </li>
                            <li>
                                <input type="checkbox" name="225" value="225mm">
                                225mm
                            </li>
                            <li>
                                <input type="checkbox" name="235" value="235mm">
                                235mm
                            </li>
                            <li>
                                <input type="checkbox" name="245" value="245mm">
                                245mm
                            </li>
                            <li>
                                <input type="checkbox" name="255" value="255mm">    
                                255mm
                            </li>
                            <li>
                                <input type="checkbox" name="265" value="265mm">
                                265mm
                            </li>
                        </div>
                        <div id="mmCheck2">
                            <li>
                                <input type="checkbox" name="275" value="275mm">
                                275mm
                            </li>
                            <li>
                                <input type="checkbox" name="285" value="285mm">
                                285mm
                            </li>
                            <li>
                                <input type="checkbox" name="305" value="305mm">
                                305mm
                            </li>
                        </div>
                    </ul>
                </div>
                <div id="percent"> 
                    <div id="percentTitle">
                        <p>편평비(%)</p>
                    </div>
                    <ul id="percentCheck">
                        <div id="percentCheck1">
                            <li>
                                <input type="checkbox" name="30per" value="30%">
                                30%
                            </li>
                            <li>
                                <input type="checkbox" name="35per" value="35%">    
                                35%
                            </li>
                            <li>
                                <input type="checkbox" name="40per" value="40%">
                                40%
                            </li>
                            <li>
                                <input type="checkbox" name="45per" value="45%">
                                45%
                            </li>
                            <li>
                                <input type="checkbox" name="50per" value="50%">
                                50%
                            </li>
                            <li>
                                <input type="checkbox" name="55per" value="55%">
                                55%
                            </li>
                            <li>
                                <input type="checkbox" name="60per" value="60%">    
                                60%
                            </li>
                            <li>
                                <input type="checkbox" name="80per" value="80%">
                                80%
                            </li>
                        </div>
                    </ul>
                </div>
                <div id="inch"> 
                    <div id="inchTitle">
                        <p>휠지름(인치)</p>
                    </div>
                    <ul id="inchCheck">
                        <div id="inchCheck1">
                            <li>
                                <input type="checkbox" name="13inch" value="13인치">
                                13인치
                            </li>
                            <li>
                                <input type="checkbox" name="16inch" value="16인치">    
                                16인치
                            </li>
                            <li>
                                <input type="checkbox" name="17inch" value="17인치">
                                17인치
                            </li>
                            <li>
                                <input type="checkbox" name="18inch" value="18인치">
                                18인치
                            </li>
                            <li>
                                <input type="checkbox" name="19inch" value="19인치">
                                19인치
                            </li>
                            <li>
                                <input type="checkbox" name="20inch" value="20인치">
                                20인치
                            </li>
                            <li>
                                <input type="checkbox" name="21inch" value="21인치">    
                                21인치
                            </li>
                            <li>
                                <input type="checkbox" name="22inch" value="22인치">
                                22인치
                            </li>
                        </div>
                    </ul>
                </div>
            </div>
            <div id="choiceButtonWrap">
                <button id="choiceButton" type="sumit">검색</button>
            </div>
        </form>
    </div>

    <script src="./js/detail.js"></script>
</body>
<script>
    const minus = document.querySelector(".qtyminus");
    const plus = document.querySelector(".qtyplus");
    const qty = document.querySelector(".qty");
    const product_price = parseInt(document.querySelector(".product_price").innerHTML.replace(/,/g,''))
    const price = document.querySelector(".price")
    minus.addEventListener("click",() => {
        if (parseInt(qty.innerHTML) == 0) {
            qty.innerHTML = 0;
        }
        else {
            qty.innerHTML -= 1;
            price.innerHTML = parseInt(qty.innerHTML) * product_price;
        }
    })
    plus.addEventListener("click",() => {
        qty.innerHTML = parseInt(qty.innerHTML) +1;
        price.innerHTML = parseInt(qty.innerHTML) * product_price;
    })

    const cartinsert = document.querySelector(".cart");
    cartinsert.addEventListener("click",() => {
        if(parseInt(qty.innerHTML)<1){
            alert("수량을 선택해주세요");
            return false;
        };
    });

    const orderinsert = document.querySelector(".purchase");
    orderinsert.addEventListener("click",() => {
        if(parseInt(qty.innerHTML)<1){
            alert("수량을 선택해주세요");
            return false;
        };
    });
</script>
</html>