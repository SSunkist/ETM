<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV TIRE MALL</title>
    <link rel="stylesheet" href="../css/detail.css">
    <link rel="icon" href="./img/favicon.jpg" type="image/x-icon">
</head>
<body>
    <div id="allWrap">
        <header th:replace="html/HFM.html::header"></header>
        
        <main>
            <div class="main-wrapper"> 
                <div class="main-header">
                    <h2>상세 검색</h2>
                    <div>제품찾기</div>
                    <div>장바구니</div>
                    <div>마이페이지</div>
                </div>
                <div class="main">
                    <div class="main-content">
                        <img th:src="${product.product_image}">
                        <div class="main-content-product">
                            <div class="product_name">[[${product.product_name}]]</div>
                            <div class="product_spec">[[${product.product_spec}]]</div>
                            <div class="product_price">[[${product.product_price}]]</div>
                        </div>
                        <div class="main-content-buy">
                            <div class="main-content-buy-qty">
                                수량&nbsp;
                                <div class="select-qty">
                                    <button type="button" class="qtyminus">-</button>
                                    <div class="qty">0</div>
                                    <button type="button" class="qtyplus">+</button>
                                </div>
                            </div>
                            <div class="totalprice">총 상품금액&nbsp; <span class="price">0</span>원</div>
                            <button type="button" class="cart">장바구니</button>
                            <button type="button" class="purchase">구매하기</button>
                        </div>
                    </div>
                    <div class="main-spec">
                        <div id="goodsdetail">상품 상세정보</div>
                        <div class="main-spec-list">
                            <table id="details">
                                <tr>
                                    <td id="design">제조회사</td>
                                    <td>[[${company}]]</td>
                                    <td id="design">적용차종</td>
                                    <td>[[${product.car_type}]]</td>
                                </tr>
                            </table>
                            <table id="details">
                                <tr>
                                    <th:block th:if="${product.season} != null or ${product.alpine} != null">
                                        <th colspan="4" style="width:1200px">타이어 종류</th>
                                    </th:block>
                                </tr>
                                <tr class="recommend">
                                    <th:block th:if="${product.season} != null">
                                        <td id="design">[[${product.season}]]</td>
                                        <td>O</td>
                                    </th:block>
                                    <th:block th:if="${product.alpine} != null">
                                        <td id="design">[[${product.alpine}]]</td>
                                        <td>O</td>
                                    </th:block>
                                </tr>
                            <table id="details">
                                <tr>
                                    <th colspan="4">타이어 특성</th>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.tire_type} != null">
                                        <td id="design">[[${product.tire_type}]]</td>
                                        <td>O</td>
                                    </th:block>
                                    <th:block th:if="${product.low_noise} != null">
                                        <td id="design">[[${product.low_noise}]]</td>
                                        <td>O</td>
                                    </th:block>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.width} != null">
                                        <td id="design">단면폭</td>
                                        <td>[[${product.width}]]</td>
                                    </th:block>
                                    <th:block th:if="${product.aspect_ratio} != null">
                                        <td id="design">편평비</td>
                                        <td>[[${product.aspect_ratio}]]</td>
                                    </th:block>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.wheel_diameter} != null">
                                        <td id="design">휠지름</td>
                                        <td>[[${product.wheel_diameter}]]</td>
                                    </th:block>
                                    <th:block th:if="${product.energy_efficiency_rating} != null">
                                        <td id="design">에너지효율등급</td>
                                        <td>[[${product.energy_efficiency_rating}]]</td>
                                    </th:block>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.wet_road_braking_power} != null">
                                        <td id="design">젖은노면제동력</td>
                                        <td>[[${product.wet_road_braking_power}]]</td>
                                    </th:block>
                                    <th:block th:if="${product.utqg_treadwear} != null">
                                        <td id="design">UTQG 마모지수</td>
                                        <td>[[${product.utqg_treadwear}]]</td>
                                    </th:block>
                                </tr>
                                <tr>
                                    <th:block th:if="${product.utqg_braking_power} != null">
                                        <td id="design">UTQG 제동력</td>
                                        <td>[[${product.utqg_braking_power}]]</td>
                                    </th:block>
                                    <th:block th:if="${product.utqg_heat_resistance} != null">
                                        <td id="design">UTQG 마모지수</td>
                                        <td>[[${product.utqg_heat_resistance}]]</td>
                                    </th:block>
                                </tr>
                            </table>
                            <table id="details1">
                                    <th:block th:if="${product.recommend} != null">
                                        <tr>    
                                            <th id="design1" th:if="${product.recommend} != null">추천 차종</th>
                                        </tr>
                                        <td class="recommend">[[${product.recommend}]]</td>
                                    </th:block>
                            </table>
                        </div>
                    </div>
                    <div id="review">
                    <div id="goodsreview">상품 리뷰</div><br>
                        <th:block th:if="${cnt} < 1">
                            <div class="main-review">
                                <div class="main-review-list">현재 작성된 리뷰가 없습니다.</div>
                            </div>
                        </th:block>

                        <th:block th:if="${cnt} > 0">
                            <div class="main-review" th:each="review : ${review}">
                                <div class="main-review-id">[[${review.id}]]&nbsp;|&nbsp;[[${review.date}]]</div>
                                <div class="main-review-list">[[${review.content}]]</div><br>
                            </div>
                        </th:block>
                    </div> 
                </div>

            </div>
        </main>

        <footer th:replace="html/HFM.html::footer"></footer>
    </div>
    <div id="checkBox" th:replace="html/HFM.html::modal"></div>

    <script src="./js/detail.js"></script>
</body>
<script>
    const minus = document.querySelector(".qtyminus");
    const plus = document.querySelector(".qtyplus");
    const qty = document.querySelector(".qty");
    const product_price = parseInt(document.querySelector(".product_price").innerHTML.replace(/,/g,''))
    const price = document.querySelector(".price")
    minus.addEventListener("click",() => {
        if (parseInt(qty.innerHTML) == 0) {
            qty.innerHTML = 0;
        }
        else {
            qty.innerHTML -= 1;
            price.innerHTML = parseInt(qty.innerHTML) * product_price;
        }
    })
    plus.addEventListener("click",() => {
        qty.innerHTML = parseInt(qty.innerHTML) +1;
        price.innerHTML = parseInt(qty.innerHTML) * product_price;
    })

    const cartinsert = document.querySelector(".cart");
    cartinsert.addEventListener("click",() => {
        if(parseInt(qty.innerHTML)<1){
            alert("수량을 선택해주세요");
            return false;
        };
    });

    const orderinsert = document.querySelector(".purchase");
    orderinsert.addEventListener("click",() => {
        if(parseInt(qty.innerHTML)<1){
            alert("수량을 선택해주세요");
            return false;
        };
    });
</script>
</html>