<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EV TIRE MALL</title>
    <link rel="stylesheet" href="../css/detail.css">
    <link rel="icon" href="./img/favicon.jpg" type="image/x-icon">
</head>
<body>
    <header> <!-- header -->
        <section id="logoSearch"> <!-- logoSearch -->
            <div id="logo">
                <img src="./images/logo.png">
            </div>
            <div id="search">
                <form>
                    <input type="text" placeholder="검색어를 입력해주세요.">
                    <button type="submit">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                    </button>
                </form>
            </div>
        </section>
        <section id="user"> <!-- user -->
            <div id="login">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-power" viewBox="0 0 16 16">
                    <path d="M7.5 1v7h1V1h-1z"/>
                    <path d="M3 8.812a4.999 4.999 0 0 1 2.578-4.375l-.485-.874A6 6 0 1 0 11 3.616l-.501.865A5 5 0 1 1 3 8.812z"/>
                </svg>
                <p>로그인</p>
            </div>
            <div id="cart">
                <svg id="cart" xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-cart4" viewBox="0 0 16 16">
                    <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"/>
                </svg>
                <p>장바구니</p>
            </div>
            <div id="mypage">
                <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                    <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0Zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4Zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10Z"/>
                </svg>
                <p>마이페이지</p>
            </div>
        </section>
    </header>
    
    <main>
        <div class="main-wrapper">
            <div class="main-header">
                <div>제품찾기</div>
                <div>장바구니</div>
                <div>마이페이지</div>
            </div>
            <div class="main">
                <div class="main-content">
                    <div class="main-content-image"><img th:src="${product.product_image}"></div>
                    <div class="main-content-product">
                        <div>[[${product.product_name}]]</div>
                        <div>[[${product.product_spec}]]</div>
                        <div class="product_price">[[${product.product_price}]]</div>
                    </div>
                    <div class="main-content-buy">
                        <div class="main-content-buy-qty">
                            <div>수량</div>
                            <div class="select-qty">
                                <button type="button" class="qtyminus">-</button>
                                <div class="qty">0</div>
                                <button type="button" class="qtyplus">+</button>
                            </div>
                        </div>
                        <div class="totalprice">총상품금액 <span class="price">0</span>원</div>
                        <div class="cart">장바구니</div>
                        <div class="purchase">구매하기</div>
                    </div>
                </div>
                <div class="main-spec">
                    <div>상품 상세정보</div>
                    <div class="main-spec-list">
                        <table>
                            <tr>
                                <td>제조회사</td>
                                <td>[[${company}]]</td>
                                <td>적용차종</td>
                                <td>[[${product.car_type}]]</td>
                            </tr>
                            <tr>
                                <th>타이어종류</th>
                            </tr>
                            <tr>
                                <th:block th:if="${product.season} != null">
                                    <td>[[${product.season}]]</td>
                                    <td>O</td>
                                </th:block>
                                <th:block th:if="${product.alpine} != null">
                                    <td>[[${product.alpine}]]</td>
                                    <td>O</td>
                                </th:block>
                            </tr>
                            <tr>
                                <th>타이어특성</th>
                            </tr>
                            <tr>
                                <th:block th:if="${product.tire_type} != null">
                                    <td>[[${product.tire_type}]]</td>
                                    <td>O</td>
                                </th:block>
                                <th:block th:if="${product.low_noise} != null">
                                    <td>[[${product.low_noise}]]</td>
                                    <td>O</td>
                                </th:block>
                            </tr>
                            <tr>
                                <th:block th:if="${product.width} != null">
                                    <td>단면폭</td>
                                    <td>[[${product.width}]]</td>
                                </th:block>
                                <th:block th:if="${product.aspect_ratio} != null">
                                    <td>편평비</td>
                                    <td>[[${product.aspect_ratio}]]</td>
                                </th:block>
                            </tr>
                            <tr>
                                <th:block th:if="${product.wheel_diameter} != null">
                                    <td>휠지름</td>
                                    <td>[[${product.wheel_diameter}]]</td>
                                </th:block>
                                <th:block th:if="${product.energy_efficiency_rating} != null">
                                    <td>에너지효율등급</td>
                                    <td>[[${product.energy_efficiency_rating}]]</td>
                                </th:block>
                            </tr>
                            <tr>
                                <th:block th:if="${product.wet_road_braking_power} != null">
                                    <td>젖은노면제동력</td>
                                    <td>[[${product.wet_road_braking_power}]]</td>
                                </th:block>
                                <th:block th:if="${product.utqg_treadwear} != null">
                                    <td>UTQG 마모지수</td>
                                    <td>[[${product.utqg_treadwear}]]</td>
                                </th:block>
                            </tr>
                            <tr>
                                <th:block th:if="${product.utqg_braking_power} != null">
                                    <td>UTQG 제동력</td>
                                    <td>[[${product.utqg_braking_power}]]</td>
                                </th:block>
                                <th:block th:if="${product.utqg_heat_resistance} != null">
                                    <td>UTQG 마모지수</td>
                                    <td>[[${product.utqg_heat_resistance}]]</td>
                                </th:block>
                            </tr>
                            <tr>
                                <th:block th:if="${product.recommend} != null">
                                    <tr>    
                                        <th th:if="${product.recommend} != null" colspan="4">추천차종</th>
                                    </tr>
                                    <td class="recommend" colspan="4">[[${product.recommend}]]</td>
                                </th:block>
                            </tr>
                        </table>
                    </div>
                </div>

                <div>상품 리뷰</div>
                <th:block th:if="${cnt} < 1">
                    <div class="main-review">
                        <div class="main-review-list">현재 작성된 리뷰가 없습니다.</div>
                    </div>
                </th:block>

                <th:block th:if="${cnt} > 0">
                    <div class="main-review" th:each="review : ${review}">
                        <div class="main-review-id">[[${review.id}]]</div>
                        <div class="main-review-list">[[${review.content}]]</div>
                        <div class="main-review-date">[[${review.date}]]</div>
                    </div>
                </th:block>

            </div>

        </div>
    </main>

    <footer> <!-- footer -->
        <div id="introduce">
            <p>주소 : 광주광역시 광산구 소촌로 152번길 37</p>
            <p>대표이사 : 조가영</p>
            <p>사업자등록번호 : 108-35-62845</p>
        </div>
        <div id="help">
            <p>고객센터 8356 - 2845</p>
            <p>평일 09:00 ~ 18:00</p>
            <p>토요일, 공휴일 휴무</p>
        </div>
    </footer>
</body>
<script>
    const minus = document.querySelector(".qtyminus");
    const plus = document.querySelector(".qtyplus");
    const qty = document.querySelector(".qty");
    const product_price = parseInt(document.querySelector(".product_price").innerHTML.replace(/,/g,''))
    const price = document.querySelector(".price")
    minus.addEventListener("click",() => {
        if (parseInt(qty.innerHTML) == 0) {
            qty.innerHTML = 0;
        }
        else {
            qty.innerHTML -= 1;
            price.innerHTML = parseInt(qty.innerHTML) * product_price;
        }
    })
    plus.addEventListener("click",() => {
        qty.innerHTML = parseInt(qty.innerHTML) +1;
        price.innerHTML = parseInt(qty.innerHTML) * product_price;
    })

</script>
</html>